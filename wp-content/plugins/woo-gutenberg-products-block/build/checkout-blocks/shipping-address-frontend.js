(window.webpackWcBlocksJsonp=window.webpackWcBlocksJsonp||[]).push([[51],{25:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n(0),c=n(14),r=n.n(c);function o(e){const t=Object(s.useRef)(e);return r()(e,t.current)||(t.current=e),t.current}},290:function(e,t,n){"use strict";var s=n(0),c=n(5),r=n.n(c);n(291),t.a=({children:e,className:t,headingLevel:n,...c})=>{const o=r()("wc-block-components-title",t),i=`h${n}`;return Object(s.createElement)(i,{className:o,...c},e)}},291:function(e,t){},292:function(e,t){},293:function(e,t,n){"use strict";var s=n(1);t.a=({defaultTitle:e=Object(s.__)("Step","woo-gutenberg-products-block"),defaultDescription:t=Object(s.__)("Step description text.","woo-gutenberg-products-block"),defaultShowStepNumber:n=!0})=>({title:{type:"string",default:e},description:{type:"string",default:t},showStepNumber:{type:"boolean",default:n}})},299:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(4),c=n(3);const r=()=>{const{customerData:e,isInitialized:t}=Object(s.useSelect)((e=>{const t=e(c.CART_STORE_KEY);return{customerData:t.getCustomerData(),isInitialized:t.hasFinishedResolution("getCartData")}})),{setShippingAddress:n,setBillingAddress:r}=Object(s.useDispatch)(c.CART_STORE_KEY);return{isInitialized:t,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,setBillingAddress:r,setShippingAddress:n}}},311:function(e,t){},312:function(e,t){},313:function(e,t){},316:function(e,t,n){"use strict";var s=n(0),c=n(5),r=n.n(c),o=n(290);n(292);const i=({title:e,stepHeadingContent:t})=>Object(s.createElement)("div",{className:"wc-block-components-checkout-step__heading"},Object(s.createElement)(o.a,{"aria-hidden":"true",className:"wc-block-components-checkout-step__title",headingLevel:"2"},e),!!t&&Object(s.createElement)("span",{className:"wc-block-components-checkout-step__heading-content"},t));t.a=({id:e,className:t,title:n,legend:c,description:o,children:a,disabled:l=!1,showStepNumber:d=!0,stepHeadingContent:u=(()=>{})})=>{const p=c||n?"fieldset":"div";return Object(s.createElement)(p,{className:r()(t,"wc-block-components-checkout-step",{"wc-block-components-checkout-step--with-step-number":d,"wc-block-components-checkout-step--disabled":l}),id:e,disabled:l},!(!c&&!n)&&Object(s.createElement)("legend",{className:"screen-reader-text"},c||n),!!n&&Object(s.createElement)(i,{title:n,stepHeadingContent:u()}),Object(s.createElement)("div",{className:"wc-block-components-checkout-step__container"},!!o&&Object(s.createElement)("p",{className:"wc-block-components-checkout-step__description"},o),Object(s.createElement)("div",{className:"wc-block-components-checkout-step__content"},a)))}},384:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n(2),c=n(0),r=n(4),o=n(3),i=n(299),a=n(91);const l=()=>{const{needsShipping:e}=Object(a.a)(),{useShippingAsBilling:t,prefersCollection:n}=Object(r.useSelect)((e=>({useShippingAsBilling:e(o.CHECKOUT_STORE_KEY).getUseShippingAsBilling(),prefersCollection:e(o.CHECKOUT_STORE_KEY).prefersCollection()}))),{__internalSetUseShippingAsBilling:l}=Object(r.useDispatch)(o.CHECKOUT_STORE_KEY),{billingAddress:d,setBillingAddress:u,shippingAddress:p,setShippingAddress:b}=Object(i.a)(),h=Object(c.useCallback)((e=>{u({email:e})}),[u]),g=Object(c.useCallback)((e=>{u({phone:e})}),[u]),m=Object(c.useCallback)((e=>{b({phone:e})}),[b]),O=Object(s.getSetting)("forcedBillingAddress",!1);return{shippingAddress:p,billingAddress:d,setShippingAddress:b,setBillingAddress:u,setEmail:h,setBillingPhone:g,setShippingPhone:m,defaultAddressFields:s.defaultAddressFields,useShippingAsBilling:t,setUseShippingAsBilling:l,needsShipping:e,showShippingFields:!O&&e&&!n,showShippingMethods:e&&!n,showBillingFields:!e||!t||n,forcedBillingAddress:O,useBillingAsShipping:O||n}}},388:function(e,t,n){"use strict";var s=n(0),c=n(49),r=n(44);const o=["BUTTON","FIELDSET","INPUT","OPTGROUP","OPTION","SELECT","TEXTAREA","A"];t.a=({children:e,style:t={},...n})=>{const i=Object(s.useRef)(null),a=()=>{i.current&&c.focus.focusable.find(i.current).forEach((e=>{o.includes(e.nodeName)&&e.setAttribute("tabindex","-1"),e.hasAttribute("contenteditable")&&e.setAttribute("contenteditable","false")}))},l=Object(r.b)(a,0,{leading:!0});return Object(s.useLayoutEffect)((()=>{let e;return a(),i.current&&(e=new window.MutationObserver(l),e.observe(i.current,{childList:!0,attributes:!0,subtree:!0})),()=>{e&&e.disconnect(),l.cancel()}}),[l]),Object(s.createElement)("div",{ref:i,"aria-disabled":"true",style:{userSelect:"none",pointerEvents:"none",cursor:"normal",...t},...n},e)}},389:function(e,t,n){"use strict";var s=n(0),c=n(1),r=n(9);t.a=({id:e="phone",errorId:t="phone",isRequired:n=!1,value:o="",onChange:i})=>Object(s.createElement)(r.ValidatedTextInput,{id:e,errorId:t,type:"tel",autoComplete:"tel",required:n,label:n?Object(c.__)("Phone","woo-gutenberg-products-block"):Object(c.__)("Phone (optional)","woo-gutenberg-products-block"),value:o,onChange:i})},390:function(e,t,n){"use strict";var s=n(0),c=n(9),r=n(29),o=n(1),i=n(23),a=n(5),l=n.n(a),d=n(11),u=n(416),p=n(20),b=n(4),h=n(3);n(312);var g=Object(d.withInstanceId)((({id:e,className:t,label:n,onChange:r,options:i,value:a,required:d=!1,errorMessage:g=Object(o.__)("Please select a value.","woo-gutenberg-products-block"),errorId:m,instanceId:O="0",autoComplete:j="off"})=>{const f=Object(s.useRef)(null),E=e||"control-"+O,k=m||E,{setValidationErrors:_,clearValidationError:C}=Object(b.useDispatch)(h.VALIDATION_STORE_KEY),w=Object(b.useSelect)((e=>e(h.VALIDATION_STORE_KEY).getValidationError(k)));return Object(s.useEffect)((()=>(!d||a?C(k):_({[k]:{message:g,hidden:!0}}),()=>{C(k)})),[C,a,k,g,d,_]),Object(s.createElement)("div",{id:E,className:l()("wc-block-components-combobox",t,{"is-active":a,"has-error":(null==w?void 0:w.message)&&!(null!=w&&w.hidden)}),ref:f},Object(s.createElement)(u.a,{className:"wc-block-components-combobox-control",label:n,onChange:r,onFilterValueChange:e=>{if(e.length){const t=Object(p.a)(f.current)?f.current.ownerDocument.activeElement:void 0;if(t&&Object(p.a)(f.current)&&f.current.contains(t))return;const n=e.toLocaleUpperCase(),s=i.find((e=>e.label.toLocaleUpperCase().startsWith(n)||e.value.toLocaleUpperCase()===n));s&&r(s.value)}},options:i,value:a||"",allowReset:!1,autoComplete:j,"aria-invalid":(null==w?void 0:w.message)&&!(null!=w&&w.hidden)}),Object(s.createElement)(c.ValidationInputError,{propertyName:k}))}));n(311);var m=({className:e,countries:t,id:n,label:c,onChange:r,value:a="",autoComplete:d="off",required:u=!1,errorId:p,errorMessage:b=Object(o.__)("Please select a country.","woo-gutenberg-products-block")})=>{const h=Object(s.useMemo)((()=>Object.entries(t).map((([e,t])=>({value:e,label:Object(i.decodeEntities)(t)})))),[t]);return Object(s.createElement)("div",{className:l()(e,"wc-block-components-country-input")},Object(s.createElement)(g,{id:n,label:c,onChange:r,options:h,value:a,errorId:p,errorMessage:b,required:u,autoComplete:d}))},O=e=>Object(s.createElement)(m,{countries:r.i,...e}),j=e=>Object(s.createElement)(m,{countries:r.a,...e});n(313);const f=(e,t)=>{const n=t.find((t=>t.label.toLocaleUpperCase()===e.toLocaleUpperCase()||t.value.toLocaleUpperCase()===e.toLocaleUpperCase()));return n?n.value:""};var E=({className:e,id:t,states:n,country:r,label:a,onChange:d,autoComplete:u="off",value:p="",required:b=!1,errorId:h=""})=>{const m=n[r],O=Object(s.useMemo)((()=>m?Object.keys(m).map((e=>({value:e,label:Object(i.decodeEntities)(m[e])}))):[]),[m]),j=Object(s.useCallback)((e=>{d(O.length>0?f(e,O):e)}),[d,O]),E=Object(s.useRef)(p);return Object(s.useEffect)((()=>{E.current!==p&&(E.current=p)}),[p]),Object(s.useEffect)((()=>{if(O.length>0&&E.current){const e=f(E.current,O);e!==E.current&&j(e)}}),[O,j]),O.length>0?Object(s.createElement)(g,{className:l()(e,"wc-block-components-state-input"),id:t,label:a,onChange:j,options:O,value:p,errorMessage:Object(o.__)("Please select a state.","woo-gutenberg-products-block"),errorId:h,required:b,autoComplete:u}):Object(s.createElement)(c.ValidatedTextInput,{className:e,id:t,label:a,onChange:j,autoComplete:u,value:p,required:b})},k=e=>Object(s.createElement)(E,{states:r.j,...e}),_=e=>Object(s.createElement)(E,{states:r.b,...e}),C=n(25),w=n(2),v=n(81);t.a=Object(d.withInstanceId)((({id:e="",fields:t=Object.keys(w.defaultAddressFields),fieldConfig:n={},instanceId:r,onChange:i,type:a="shipping",values:l})=>{const{setValidationErrors:d,clearValidationError:u}=Object(b.useDispatch)(h.VALIDATION_STORE_KEY),p=Object(b.useSelect)((e=>e(h.VALIDATION_STORE_KEY).getValidationError("shipping_country"))),g=Object(C.a)(t),m=Object(s.useMemo)((()=>Object(v.a)(g,n,l.country)),[g,n,l.country]);return Object(s.useEffect)((()=>{m.forEach((e=>{e.hidden&&l[e.key]&&i({...l,[e.key]:""})}))}),[m,i,l]),Object(s.useEffect)((()=>{m.forEach((e=>{if("postcode"===e.key&&!1===e.required){const e=Object(b.dispatch)("wc/store/validation");"shipping"===a&&e.clearValidationError("shipping_postcode"),"billing"===a&&e.clearValidationError("billing_postcode")}}))}),[m,a,u]),Object(s.useEffect)((()=>{"shipping"===a&&((e,t,n,s)=>{const c="shipping_country";s||e.country||!(e.city||e.state||e.postcode)||t({[c]:{message:Object(o.__)("Please select a country to calculate rates.","woo-gutenberg-products-block"),hidden:!1}}),s&&e.country&&n(c)})(l,d,u,!(null==p||!p.message||null!=p&&p.hidden))}),[l,null==p?void 0:p.message,null==p?void 0:p.hidden,d,u,a]),e=e||r,Object(s.createElement)("div",{id:e,className:"wc-block-components-address-form"},m.map((t=>{if(t.hidden)return null;const n=`${a}_${t.key}`;if("country"===t.key){const c="shipping"===a?O:j;return Object(s.createElement)(c,{key:t.key,id:`${e}-${t.key}`,errorId:n,label:t.required?t.label:t.optionalLabel,value:l.country,autoComplete:t.autocomplete,onChange:e=>i({...l,country:e,state:""}),errorMessage:t.errorMessage,required:t.required})}if("state"===t.key){const c="shipping"===a?k:_;return Object(s.createElement)(c,{key:t.key,id:`${e}-${t.key}`,errorId:n,country:l.country,label:t.required?t.label:t.optionalLabel,value:l.state,autoComplete:t.autocomplete,onChange:e=>i({...l,state:e}),errorMessage:t.errorMessage,required:t.required})}return Object(s.createElement)(c.ValidatedTextInput,{key:t.key,id:`${e}-${t.key}`,errorId:n,className:`wc-block-components-address-form__${t.key}`,label:t.required?t.label:t.optionalLabel,value:l[t.key],autoCapitalize:t.autocapitalize,autoComplete:t.autocomplete,onChange:e=>i({...l,[t.key]:"postcode"===t.key?e.trimStart().toUpperCase():e}),customValidation:e=>!t.required&&!e.value||((e,t,n)=>!("postcode"===t&&n.country&&!Object(c.isPostcode)({postcode:e.value,country:n.country})&&(e.setCustomValidity(Object(o.__)("Please enter a valid postcode","woo-gutenberg-products-block")),1)))(e,t.key,l),errorMessage:t.errorMessage,required:t.required})})))}))},512:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(5),r=n.n(c),o=n(143),i=n(316),a=n(384),l=n(4),d=n(3),u=n(1),p=n(390),b=n(73),h=n(57),g=n(36),m=n(9),O=n(388),j=n(389),f=({showCompanyField:e=!1,showApartmentField:t=!1,showPhoneField:n=!1,requireCompanyField:c=!1,requirePhoneField:r=!1})=>{const{defaultAddressFields:o,setShippingAddress:i,setBillingAddress:l,shippingAddress:d,billingAddress:f,setShippingPhone:E,useShippingAsBilling:k,setUseShippingAsBilling:_}=Object(a.a)(),{dispatchCheckoutEvent:C}=Object(b.a)(),{isEditor:w}=Object(h.a)(),{email:v}=f,[y,S]=Object(s.useState)(!1);Object(s.useEffect)((()=>{n||E("")}),[n,E]),Object(s.useEffect)((()=>{y||(k&&l({...d,email:v}),S(!0))}),[y,l,d,k]);const A=Object(s.useMemo)((()=>({company:{hidden:!e,required:c},address_2:{hidden:!t}})),[e,c,t]),N=w?O.a:s.Fragment,I=k?[g.d.SHIPPING_ADDRESS,g.d.BILLING_ADDRESS]:[g.d.SHIPPING_ADDRESS];return Object(s.createElement)(s.Fragment,null,Object(s.createElement)(N,null,Object(s.createElement)(m.StoreNoticesContainer,{context:I}),Object(s.createElement)(p.a,{id:"shipping",type:"shipping",onChange:e=>{i(e),k&&(l({...e,email:v}),C("set-billing-address")),C("set-shipping-address")},values:d,fields:Object.keys(o),fieldConfig:A}),n&&Object(s.createElement)(j.a,{id:"shipping-phone",errorId:"shipping_phone",isRequired:r,value:d.phone,onChange:e=>{E(e),C("set-phone-number",{step:"shipping"})}})),Object(s.createElement)(m.CheckboxControl,{className:"wc-block-checkout__use-address-for-billing",label:Object(u.__)("Use same address for billing","woo-gutenberg-products-block"),checked:k,onChange:e=>{_(e),e&&l(d)}}))},E=n(293),k={...Object(E.a)({defaultTitle:Object(u.__)("Shipping address","woo-gutenberg-products-block"),defaultDescription:Object(u.__)("Enter the address where you want your order delivered.","woo-gutenberg-products-block")}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},_=n(154);t.default=Object(o.withFilteredAttributes)(k)((({title:e,description:t,showStepNumber:n,children:c,className:o})=>{const u=Object(l.useSelect)((e=>e(d.CHECKOUT_STORE_KEY).isProcessing())),{showShippingFields:p}=Object(a.a)(),{requireCompanyField:b,requirePhoneField:h,showApartmentField:g,showCompanyField:m,showPhoneField:O}=Object(_.b)();return p?Object(s.createElement)(i.a,{id:"shipping-fields",disabled:u,className:r()("wc-block-checkout__shipping-fields",o),title:e,description:t,showStepNumber:n},Object(s.createElement)(f,{requireCompanyField:b,requirePhoneField:h,showApartmentField:g,showCompanyField:m,showPhoneField:O}),c):null}))}}]);