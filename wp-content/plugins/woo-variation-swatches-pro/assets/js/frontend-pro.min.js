!function(t){var e={};function a(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(i,o,function(e){return t[e]}.bind(null,o));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=2)}([,,function(t,e,a){t.exports=a(3)},function(t,e,a){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var n,s=(n=jQuery,function(){function t(e,a){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"defaults",{}),r(this,"onInit",(function(t){i.init()})),r(this,"onExpandVariableItems",(function(t){t.preventDefault(),i.expandVariableItems(t)})),r(this,"onPreviewChange",(function(t){t.preventDefault(),i.$element.off("reset_data.wc-variation-form"),i.previewChange(t.currentTarget)})),r(this,"onChange",(function(t){i.$element.trigger("woocommerce_variation_select_change"),i.$element.trigger("check_variations"),i.$element.trigger("woocommerce_variation_has_changed")})),r(this,"onReset",(function(t){t.preventDefault(),i.reset()})),r(this,"onResetDisplayedVariation",(function(t){i.resetDisplayedVariation()})),r(this,"onUpdateAttributes",(function(t){i.updateAttributes(t)})),r(this,"onCheckVariations",(function(t){i.checkVariations()})),r(this,"onVariationChanged",(function(t){i.setupSwatchesItems()})),r(this,"onFoundVariation",(function(t,e,a){i.foundVariation(e,a)})),this._element=e,this.$element=n(e),this.settings=n.extend(!0,{},this.defaults,a),this.product_variations=this.$element.data("product_variations")||[],this.is_ajax_variation=this.product_variations.length<1,this.product_id=parseInt(this.$element.data("product_id"),10),this.threshold_min=parseInt(this.$element.data("threshold_min"),10),this.threshold_max=parseInt(this.$element.data("threshold_max"),10),this.total_children=parseInt(this.$element.data("total_children"),10),this.xhr=!1,this.previewXhr=!1,this.loading=!0,this.$information=this.$element.find(".wvs-archive-information"),this.$wrapper=this.$element.closest(woo_variation_swatches_pro_options.archive_product_wrapper),this.$image=this.$wrapper.find(woo_variation_swatches_pro_options.archive_image_selector),this.$cart_button=this.$wrapper.find(woo_variation_swatches_pro_options.archive_cart_button_selector),this.$price=this.$wrapper.find(".price"),this.$firstUL=this.$element.find(".variations ul:first"),this.$cart_button_html=this.$cart_button.clone().html(),this.$price_html=this.$price.clone().html(),this.$attributeFields=this.$element.find(".variations select"),this.$resetVariations=this.$element.find(".wvs_archive_reset_variations");var o=!1;if(woo_variation_swatches_pro_options.enable_single_variation_preview&&woo_variation_swatches_pro_options.enable_single_variation_preview_archive){var s=this.$firstUL.data("preview_attribute_name")?this.$firstUL.data("preview_attribute_name"):this.$attributeFields.first().data("attribute_name");o=".variations select[data-attribute_name='".concat(s,"']")}this.$element.off(".wc-variation-form"),this.$element.addClass("wvs-pro-loaded"),this.$element.on("click.wc-variation-form",".wvs_archive_reset_variations > a",this.onReset),this.$element.on("change.wc-variation-form",".variations select",this.onChange),this.$element.on("check_variations.wc-variation-form",this.onCheckVariations),this.$element.on("update_variation_values.wc-variation-form",this.onUpdateAttributes),this.$element.on("found_variation.wc-variation-form",this.onFoundVariation),this.$element.on("reset_data.wc-variation-form",this.onResetDisplayedVariation),this.$element.on("woocommerce_variation_has_changed.wc-variation-form",this.onVariationChanged),!woo_variation_swatches_pro_options.enable_catalog_mode&&woo_variation_swatches_pro_options.enable_single_variation_preview&&woo_variation_swatches_pro_options.enable_single_variation_preview_archive&&(this.$element.on("click.wc-variation-form",".wvs_archive_reset_variations > a",this.onResetDisplayedVariation),this.$element.on("change.wc-variation-form",o,this.onPreviewChange)),"expand"===woo_variation_swatches_pro_options.catalog_mode_behaviour&&this.$element.on("click.wc-variation-form",".woo-variation-swatches-variable-item-more",this.onExpandVariableItems),this.$element.on("woo_variation_swatches_init.wc-variation-form",this.onInit),this.$element.trigger("woo_variation_swatches_init",this)}var e,a,i;return e=t,(a=[{key:"start",value:function(){var t=this;setTimeout((function(){t.$element.trigger("check_variations"),t.$element.trigger("wc_variation_form",t),t.swatchInit()}),100)}},{key:"expandVariableItems",value:function(t){n(t.currentTarget).parent().removeClass("enabled-display-limit-mode enabled-catalog-display-limit-mode"),n(t.currentTarget).remove()}},{key:"init",value:function(){var t=this,e=this.threshold_max,a=this.total_children;this.defaultImage(),this.defaultCartButton(),this.isAjaxVariation()&&e>=a?(this.xhr&&this.xhr.abort(),this.$element.block({message:null,overlayCSS:{background:"#FFFFFF",opacity:.6}}),this.xhr=n.ajax({global:!1,url:woo_variation_swatches_pro_params.wc_ajax_url.toString().replace("%%endpoint%%","woo_get_variations"),method:"POST",data:{product_id:this.product_id,is_archive:!0}}),this.xhr.fail((function(e,a){console.error("product variations not available on: ".concat(t.product_id,"."),a)})),this.xhr.done((function(e){e&&(t.$element.data("product_variations",e),t.product_variations=t.$element.data("product_variations"),t.is_ajax_variation=!1,t.start())})),this.xhr.always((function(){t.$element.unblock()}))):this.start()}},{key:"previewChange",value:function(t){var e=this,a=n(t).data("attribute_name")||n(t).attr("name"),i=n(t).val()||"",o={},r=this.getChosenAttributes();i&&r.count&&r.count>r.chosenCount&&(o.product_id=this.product_id,o[a]=i,this.previewXhr=n.ajax({global:!1,url:woo_variation_swatches_pro_params.wc_ajax_url.toString().replace("%%endpoint%%","woo_get_preview_variation"),method:"POST",data:o}),this.previewXhr.fail((function(t,i){console.error("archive product preview not available on ".concat(e.product_id,"."),a,i)})),this.previewXhr.done((function(t){e.updatePreviewImage(t)})))}},{key:"getAvailableVariations",value:function(){return this.$element.data("product_variations")||[]}},{key:"toggleResetLink",value:function(t){t?this.$resetVariations.removeClass("show hide").addClass("show"):this.$resetVariations.removeClass("show hide").addClass("hide")}},{key:"reset",value:function(){this.$attributeFields.val("").trigger("change"),this.$element.trigger("reset_data")}},{key:"getChosenAttributes",value:function(){var t={},e=0,a=0;return this.$attributeFields.each((function(){var i=n(this).data("attribute_name")||n(this).attr("name"),o=n(this).val()||"";o.length>0&&a++,e++,t[i]=o})),{count:e,chosenCount:a,data:t}}},{key:"isMatch",value:function(t,e){var a=!0;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],r=e[i];void 0!==o&&void 0!==r&&0!==o.length&&0!==r.length&&o!==r&&(a=!1)}return a}},{key:"findMatchingVariations",value:function(t,e){for(var a=[],i=0;i<t.length;i++){var o=t[i];this.isMatch(o.attributes,e)&&a.push(o)}return a}},{key:"updateAttributes",value:function(t){var e=this,a=this.getChosenAttributes(),i=a.data;this.isAjaxVariation()||(this.$attributeFields.each((function(t,o){var r,s=n(o),l=s.data("attribute_name")||s.attr("name"),c=n(o).data("show_option_none"),h=":gt(0)",u=n("<select/>"),d=s.val()||"",_=!0;if(!s.data("attribute_html")){var v=s.clone();v.find("option").prop("disabled",!1).prop("selected",!1).removeAttr("attached").removeClass("out-of-stock"),s.data("attribute_html",v.html())}u.html(s.data("attribute_html"));var p=n.extend(!0,{},i);p[l]="";var m=e.findMatchingVariations(e.getAvailableVariations(),p);for(var f in m)if(void 0!==m[f]){var g=m[f].attributes;for(var b in g)if(g.hasOwnProperty(b)){var w=g[b],$="",y=!1;if(b===l)if(m[f].variation_is_active&&($="enabled"),m[f].is_in_stock||(y=!0),w){w=n("<div/>").html(w).text();var k=u.find("option");if(k.length)for(var C=0,x=k.length;C<x;C++){var V=n(k[C]);if(w===V.val()){V.addClass("attached "+$),a.count>1&&a.chosenCount>0&&!d&&y&&V.addClass("out-of-stock"),a.count>1&&a.chosenCount===a.count&&y&&V.addClass("out-of-stock"),!woo_variation_swatches_pro_options.enable_catalog_mode&&1===a.count&&y&&V.addClass("out-of-stock");break}}}else u.find("option:gt(0)").addClass("attached "+$)}}r=u.find("option.attached").length,d&&(_=!1,0!==r&&u.find("option.attached.enabled").each((function(){var t=n(this).val();if(d===t)return _=!0,!1}))),r>0&&d&&_&&"no"===c&&(u.find("option:first").remove(),h=""),u.find("option"+h+":not(.attached)").remove(),s.html(u.html()),s.find("option"+h+":not(.enabled)").prop("disabled",!0),d?_?s.val(d):s.val("").trigger("change"):s.val("")})),this.$element.trigger("woocommerce_update_variation_values"))}},{key:"checkVariations",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=e||this.getChosenAttributes(),i=a.data;if(a.count&&a.count===a.chosenCount)if(this.isAjaxVariation())this.xhr&&this.xhr.abort(),this.$element.block({message:null,overlayCSS:{background:"#FFFFFF",opacity:.6}}),i.product_id=this.product_id,i.custom_data=this.$element.data("custom_data"),this.xhr=n.ajax({global:!1,url:woo_variation_swatches_pro_params.wc_ajax_url.toString().replace("%%endpoint%%","woo_get_variation"),method:"POST",data:i}),this.xhr.fail((function(e,a){console.error("product variations not available on ".concat(t.product_id,"."),a)})),this.xhr.done((function(e){e?t.$element.trigger("found_variation",[e,!0]):(t.$element.trigger("reset_data"),a.chosenCount=0)})),this.xhr.always((function(){t.$element.unblock()}));else{this.$element.trigger("update_variation_values");var o=this.getAvailableVariations(),r=this.findMatchingVariations(o,i),s=r.shift();s?this.$element.trigger("found_variation",[s,!1]):(this.$element.trigger("reset_data"),a.chosenCount=0)}else this.$element.trigger("update_variation_values"),this.$element.trigger("reset_data");this.toggleResetLink(a.chosenCount>0)}},{key:"isAjaxVariation",value:function(){return this.is_ajax_variation}},{key:"swatchInit",value:function(){this.setupSwatchesItems(),this.setupSwatchesEvents()}},{key:"setupSwatchesItems",value:function(){var t=this;this.$element.find("ul.variable-items-wrapper").each((function(e,a){var i="",o=n(a).parent().find("select.woo-variation-raw-select"),r=o.find("option"),s=o.find("option:disabled"),l=o.find("option.enabled.out-of-stock"),c=o.find("option:selected"),h=o.find("option").eq(1),u=[],d=[],v=[];r.each((function(){""!==n(this).val()&&(u.push(n(this).val()),i=0===c.length?h.val():c.val())})),s.each((function(){""!==n(this).val()&&d.push(n(this).val())})),l.each((function(){""!==n(this).val()&&v.push(n(this).val())}));var p=_.difference(u,d);t.setupSwatchesItem(a,i,p,v)}))}},{key:"setupSwatchesItem",value:function(t,e,a,i){var o=this;n(t).find("li.variable-item").each((function(t,r){var s=n(r).attr("data-value");n(r).attr("data-title"),n(r).removeClass("selected disabled no-stock").addClass("disabled"),n(r).attr("aria-checked","false"),n(r).attr("tabindex","-1"),n(r).attr("data-wvstooltip-out-of-stock",""),n(r).find("input.variable-item-radio-input:radio").prop("disabled",!0).prop("checked",!1),o.isAjaxVariation()?(n(r).find("input.variable-item-radio-input:radio").prop("disabled",!1),n(r).removeClass("selected disabled no-stock"),s===e&&(n(r).addClass("selected"),n(r).attr("aria-checked","true"),n(r).attr("tabindex","0"),n(r).find("input.variable-item-radio-input:radio").prop("disabled",!1).prop("checked",!0),n(r).trigger("wvs-item-updated",[e,s]))):(_.includes(a,s)&&(n(r).removeClass("selected disabled"),n(r).removeAttr("aria-hidden"),n(r).attr("tabindex","0"),n(r).find("input.variable-item-radio-input:radio").prop("disabled",!1),s===e&&(n(r).addClass("selected"),n(r).attr("aria-checked","true"),n(r).find("input.variable-item-radio-input:radio").prop("checked",!0),n(r).trigger("wvs-item-updated",[e,s]))),_.includes(i,s)&&woo_variation_swatches_pro_options.clickable_out_of_stock&&(n(r).removeClass("disabled").addClass("no-stock"),n(r).attr("data-wvstooltip-out-of-stock",woo_variation_swatches_pro_options.out_of_stock_tooltip_text)))}))}},{key:"setupSwatchesEvents",value:function(){var t=this,e=this;this.$element.find("ul.variable-items-wrapper").each((function(a,i){var o=n(i).parent().find("select.woo-variation-raw-select");woo_variation_swatches_pro_options.clear_on_reselect?(n(i).on("click.wvs","li.variable-item:not(.selected):not(.radio-variable-item)",(function(t){t.preventDefault(),t.stopPropagation();var a=n(this).data("value");o.val(a).trigger("change"),o.trigger("click"),woo_variation_swatches_pro_options.is_mobile,n(this).trigger("wvs-selected-item",[a,o,e.$element])})),n(i).on("click.wvs","li.variable-item.selected:not(.radio-variable-item)",(function(t){t.preventDefault(),t.stopPropagation();var a=n(this).val();if(woo_variation_swatches_pro_options.enable_catalog_mode&&"hover"===woo_variation_swatches_pro_options.catalog_mode_trigger)return!1;o.val("").trigger("change"),o.trigger("click"),n(this).trigger("wvs-unselected-item",[a,o,e.$element])})),n(i).on("click.wvs","input.variable-item-radio-input:radio",(function(t){t.stopPropagation(),n(this).trigger("change.wvs",{radioChange:!0})})),n(i).on("change.wvs","input.variable-item-radio-input:radio",(function(t,a){if(t.preventDefault(),t.stopPropagation(),a&&a.radioChange){var i=n(this).val();n(this).parent("li.radio-variable-item").hasClass("selected")?(o.val("").trigger("change"),n(this).parent("li.radio-variable-item").trigger("wvs-unselected-item",[i,o,e.$element])):(o.val(i).trigger("change"),n(this).parent("li.radio-variable-item").trigger("wvs-selected-item",[i,o,e.$element])),o.trigger("click"),woo_variation_swatches_pro_options.is_mobile}}))):(n(i).on("click.wvs","li.variable-item:not(.radio-variable-item)",(function(t){t.preventDefault(),t.stopPropagation();var a=n(this).data("value");o.val(a).trigger("change"),o.trigger("click"),woo_variation_swatches_pro_options.is_mobile,n(this).trigger("wvs-selected-item",[a,o,e._element])})),n(i).on("change.wvs","input.variable-item-radio-input:radio",(function(t){t.preventDefault(),t.stopPropagation();var a=n(this).val();o.val(a).trigger("change"),o.trigger("click"),woo_variation_swatches_pro_options.is_mobile,n(this).parent("li.radio-variable-item").removeClass("selected disabled no-stock").addClass("selected"),n(this).parent("li.radio-variable-item").trigger("wvs-selected-item",[a,o,e.$element])}))),n(i).on("keydown.wvs","li.variable-item:not(.disabled)",(function(t){(t.keyCode&&32===t.keyCode||t.key&&" "===t.key||t.keyCode&&13===t.keyCode||t.key&&"enter"===t.key.toLowerCase())&&(t.preventDefault(),n(this).trigger("click"))})),!woo_variation_swatches_pro_options.is_mobile&&woo_variation_swatches_pro_options.enable_catalog_mode&&"hover"===woo_variation_swatches_pro_options.catalog_mode_trigger&&(t.threshold_max<t.total_children?n(i).on("mouseenter.wvs","li.variable-item:not(.radio-variable-item)",(function(){n(this).trigger("click"),n(i).off("mouseenter.wvs")})):n(i).on("mouseenter.wvs","li.variable-item:not(.radio-variable-item)",(function(t){n(this).trigger("click")})),woo_variation_swatches_pro_options.linkable_attribute&&n(i).on("click.linkable","li.variable-item:not(.radio-variable-item)",(function(t){if(void 0!==t.originalEvent){var e=n(this).attr("data-url");e&&(window.location.href=e)}})))}))}},{key:"resetDisplayedVariation",value:function(){this.resetPrice(),this.resetImage(),this.resetAvailabilityInfo(),this.resetCartButton()}},{key:"foundVariation",value:function(t,e){var a=!0;this.updateImage(t),this.reAttachCatalogModeHover(),woo_variation_swatches_pro_options.enable_catalog_mode||(this.updateAvailabilityInfo(t),this.updatePrice(t)),t.is_purchasable&&t.is_in_stock&&t.variation_is_visible||(a=!1),a&&!woo_variation_swatches_pro_options.enable_catalog_mode?this.updateCartButton(t):this.resetCartButton(),this.$element.trigger("show_variation",[t,a])}},{key:"reAttachCatalogModeHover",value:function(){!woo_variation_swatches_pro_options.is_mobile&&this.threshold_max<this.total_children&&woo_variation_swatches_pro_options.enable_catalog_mode&&"hover"===woo_variation_swatches_pro_options.catalog_mode_trigger&&this.$element.find("ul.variable-items-wrapper").each((function(t,e){n(e).one("mouseenter.wvs","li.variable-item:not(.radio-variable-item):not(.selected)",(function(){n(this).trigger("click")}))}))}},{key:"updateCartButton",value:function(t){this.$cart_button.html(t.add_to_cart_text),this.$cart_button.attr("href",t.add_to_cart_url),this.$cart_button.attr("aria-label",t.add_to_cart_description),this.$cart_button.addClass(t.add_to_cart_ajax_class)}},{key:"resetCartButton",value:function(){this.$cart_button.html(this.$cart_button.attr("data-o_html")),this.$cart_button.attr("href",this.$cart_button.attr("data-o_href")),this.$cart_button.attr("aria-label",this.$cart_button.attr("data-o_aria-label")),this.$cart_button.removeClass("ajax_add_to_cart"),this.$wrapper.find(".added_to_cart").remove()}},{key:"updateAvailabilityInfo",value:function(t){var e;woo_variation_swatches_pro_options.archive_show_availability&&(e=(e=(e=(t.variation_is_visible?wp.template("wvs-variation-template"):wp.template("wvs-unavailable-variation-template"))({variation:t})).replace("/*<![CDATA[*/","")).replace("/*]]>*/",""),this.$information.html(e))}},{key:"resetAvailabilityInfo",value:function(){this.$information.html("")}},{key:"updatePrice",value:function(t){t&&t.price_html&&t.price_html.length>1&&this.$price.html(t.price_html)}},{key:"resetPrice",value:function(){this.$price.html(this.$price_html)}},{key:"defaultImage",value:function(){this.$image.attr("data-o_src",this.$image.attr("src")),this.$image.attr("srcset")&&this.$image.attr("data-o_srcset",this.$image.attr("srcset")),this.$image.attr("sizes")&&this.$image.attr("data-o_sizes",this.$image.attr("sizes"))}},{key:"defaultCartButton",value:function(){this.$cart_button.attr("data-o_html",this.$cart_button.html()),this.$cart_button.attr("href")&&this.$cart_button.attr("data-o_href",this.$cart_button.attr("href")),this.$cart_button.attr("aria-label")&&this.$cart_button.attr("data-o_aria-label",this.$cart_button.attr("aria-label"))}},{key:"updateImage",value:function(t){t&&t.image&&t.image.src&&t.image.src.length>1&&(this.$image.attr("src",t.image.src),t.image.srcset.length>1&&this.$image.attr("srcset",t.image.srcset),t.image.sizes.length>1&&this.$image.attr("sizes",t.image.sizes))}},{key:"updatePreviewImage",value:function(t){t&&t.image&&t.image.thumb_src&&t.image.thumb_src.length>1&&(this.$image.attr("src",t.image.thumb_src),t.image.srcset.length>1&&this.$image.attr("srcset",t.image.srcset),t.image.sizes.length>1&&this.$image.attr("sizes",t.image.sizes))}},{key:"resetImage",value:function(){this.$image.attr("src",this.$image.attr("data-o_src")),this.$image.attr("data-o_srcset")&&this.$image.attr("srcset",this.$image.attr("data-o_srcset")),this.$image.attr("data-o_sizes")&&this.$image.attr("sizes",this.$image.attr("data-o_sizes"))}}])&&o(e.prototype,a),i&&o(e,i),t}());(function(t){return function(e,a){t.fn[e]=function(o){var r=t(this),n=r.data(e);if(n||(n=new a(r,t.extend({},o)),r.data(e,n)),"string"==typeof o){if("object"===i(n[o]))return n[o];if("function"==typeof n[o]){for(var s,l=arguments.length,c=new Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=arguments[h];return(s=n)[o].apply(s,c)}}return this},t.fn[e].Constructor=a,t[e]=function(a){for(var i,o=arguments.length,r=new Array(o>1?o-1:0),n=1;n<o;n++)r[n-1]=arguments[n];return(i=t({}))[e].apply(i,[a].concat(r))},t.fn[e].noConflict=function(){return t.fn[e]}}})(jQuery)("woo_variation_swatches_pro",s),jQuery((function(t){t(".wvs-archive-variations-wrapper").each((function(){t(this).woo_variation_swatches_pro()}))}))}]);